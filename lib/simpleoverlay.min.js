"b"!="ab".substr(-1)&&(String.prototype.substr=function(w){return function(j,s){0>j&&(j=this.length+j);return w.call(this,j,s)}}(String.prototype.substr));this.so={};
so=function(){function w(a){if("A"!==this.nodeName)console.log("SimpleOverlay error: overlay trigger must be an 'a' tag");else{a.preventDefault();p=document.createDocumentFragment();h=document.createElement("div");h.setAttribute("id","so-overlay");c=document.createElement("div");c.setAttribute("id","so-target-box");l=document.createElement("div");l.setAttribute("id","so-close-button-wrapper");m=document.createElement("div");m.setAttribute("id","so-close-button");e.addListener(m,"click",function(){x(h,
c,m)});l.appendChild(m);p.appendChild(l);p.appendChild(h);p.appendChild(c);document.body.appendChild(p);h.addEventListener("click",function(){x(this,c,m)},!1);if(q(this,"so-onpage")){var b=this.getAttribute("data-target");a=document.getElementById(b);if("null"===a)console.log("SimpleOverlay error: there is no such target element: #"+b);else{a=a.cloneNode(!0);a.style.display="block";c.appendChild(a);b=this.getAttribute("data-dimensions");if("inherit"===b)c.style.width=a.style.width,c.style.height=
a.style.height;else{var b=z(b),d=b.widthUnit||t,f=b.heightUnit||t;c.style.width="auto"===b.width?a.offsetWidth+"px":b.width+d;c.style.height="auto"===b.height?a.offsetHeight+"px":b.height+f}h.style.opacity=1;c.style.opacity=1;A();B();u()}}else if(q(this,"so-image"))if(a=this.href,b=a.substr(-3,3),-1===v.indexOf(b))console.log("SimpleOverlay error: unregistered image extension. Consider adding it in so.init() method.");else{var C=this.getAttribute("data-description");c.innerHTML=D;c.style.height="200px";
c.style.width="200px";b=new Image;b.src=a;e.addListener(b,"load",function(){c.innerHTML="";c.appendChild(this);c.style.width=this.width+"px";c.style.height=this.height+"px";if(null!==C){var a=document.createElement("div");a.className="so-image-description";a.innerHTML='<p class="so-description-text">'+C+"</p>";c.appendChild(a)}h.style.opacity=1;c.style.opacity=1;u()})}else if(q(this,"so-resource"))if(a=this.href,""===a)console.log("SimpleOverlay error: resource URL cannot be empty.");else{b=this.getAttribute("data-dimensions");
null!==b&&(b=z(b),d=b.widthUnit||t,f=b.heightUnit||t,c.style.width="auto"===b.width?"auto":b.width+d,c.style.height="auto"===b.height?"auto":b.height+f);b=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];if("function"===typeof XMLHttpRequest)var g=new XMLHttpRequest;else for(d=0;d<b.length;d+=1)try{g=new ActiveXObject(b[d]);break}catch(k){}g.onreadystatechange=function(){4===g.readyState?200===g.status?(c.innerHTML=this.responseText,A(),B(),u()):console.log("SimpleOverlay error: there was an error on AJAX request."):
(c.innerHTML=D,h.style.opacity=1,c.style.opacity=1)};g.open("get",a,!0);g.send(null)}else q(this,"so-gallery")&&j.call(this);a=this.getAttribute("data-style");null!==a&&(c.className=a)}}function j(a){c.innerHTML="";a=a||this;imageUrl=a.href;currentImageExtension=imageUrl.substr(-3,3);gallery=a.getAttribute("data-gallery");if(-1===v.indexOf(currentImageExtension))console.log("SimpleOverlay error: unregistered image extension. Consider adding it in so.init() method.");else{var b=a.getAttribute("data-index")||
n[gallery].indexOf(a),b=parseInt(b),d=n[gallery][b+1]||null,f=n[gallery][b-1]||null;a=new Image;a.src=imageUrl;e.addListener(a,"load",function(){c.innerHTML="";c.appendChild(this);c.style.width=this.width+"px";c.style.height=this.height+"px";var a=document.createElement("div");a.className="so-image-description";var g=document.createElement("p");g.className="so-description-text";var k=document.createElement("div");k.className="so-nav-box";null!==f&&k.appendChild(s(f,b,"prev"));null!==d&&k.appendChild(s(d,
b,"next"));g.appendChild(k);k=document.createTextNode("Tu b\u0119dzie opis!");g.appendChild(k);a.appendChild(g);c.appendChild(a);h.style.opacity=1;c.style.opacity=1;u()})}}function s(a,b,c){a=a.cloneNode(!0);if("next"===c){c=1;var f=E}else c=-1,f=F;a.innerHTML=f;a.setAttribute("data-index",b+c);e.addListener(a,"click",function(b){b.preventDefault();j(a)});return a}function z(a){a=a.split("|");if(a[1])var b=a[1].split(":"),c=b[0],b=b[1];a=a[0].split("-");return{width:a[0],height:a[1],widthUnit:c,heightUnit:b}}
function A(){for(selector in r)for(var a=c.querySelectorAll(selector),b=0,d=a.length;b<d;b+=1)r[selector].forEach(function(c){e.addListener(a[b],c.type,c.callback)})}function B(){var a=c.querySelectorAll(".so-close");if(null!==a)for(var b=0,d=a.length;b<d;b+=1)e.addListener(a[b],"click",function(){x()})}function u(){l.style.width=c.offsetWidth+"px";l.style.opacity=1}function q(a,b){return-1!==a.className.indexOf(b)?!0:!1}function x(a,b){a=a||document.getElementById("so-overlay");b=b||document.getElementById("so-target-box");
var c=c||document.getElementById("so-close-button-wrapper");null!==a&&(a.style.opacity=0,b.style.opacity=0,c.style.opacity=0,setTimeout(function(){a.parentNode.removeChild(a);b.parentNode.removeChild(b);c.parentNode.removeChild(c)},500))}var r={},e,n={},t="px",v="jpg|png|gif",y="click",D='<span class="so-loading">Loading data...</span>',p,h,c,l,m,E='<img src="img/next.png" />',F='<img src="img/prev.png" />';return{init:function(a){e={addListener:null,removeListener:null};"function"===typeof window.addEventListener?
(e.addListener=function(a,b,c){a.addEventListener(b,c,!1)},e.removeListener=function(a,b,c){a.removeEventListener(b,c,!1)}):"function"===typeof document.attachEvent?(e.addListener=function(a,b,c){a.attachEvent("on"+b,c)},e.removeListener=function(a,b,c){a.detachEvent("on"+b,c)}):(e.addListener=function(a,b,c){a["on"+b]=c},e.removeListener=function(a,b){a["on"+b]=null});a=a||{};var b=document.querySelectorAll(".so-onpage, .so-resource, .so-image, .so-gallery");y=a.overlayTriggerEvent||y;a.imageExtensions&&
(v+="|"+a.imageExtensions);a=0;for(var c=b.length;a<c;a+=1)if(e.addListener(b[a],y,w),q(b[a],"so-gallery")){var f=b[a].getAttribute("data-gallery");null===f?console.log("SimpleOverlay error: you have to specify gallery name"):(n[f]=n[f]||[],n[f].push(b[a]))}},addEventListener:function(a,b,c){r[b]=r[b]||[];r[b].push({type:a,callback:c})}}}();